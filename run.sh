#!/bin/bash

echo "=========================================================="
echo "Update submodules"
echo "=========================================================="
git submodule update --init

echo "=========================================================="
echo "Setup environment"
echo "=========================================================="
export MACOSX_DEPLOYMENT_TARGET=12.0

echo "=========================================================="
echo "Bootstrap vcpkg"
echo "=========================================================="
./vcpkg/bootstrap-vcpkg.sh

package_list=(
    "qt5-base"
    "qt5-tools"
)

echo "=========================================================="
echo "package_list: ${package_list[@]}"

echo "=========================================================="
echo "Install packages"
echo "=========================================================="
./vcpkg/vcpkg install ${package_list[@]}

echo "=========================================================="
echo "Export packages"
echo "=========================================================="
./vcpkg/vcpkg export ${package_list[@]} --7zip --output-dir=./ --output=vcpkg-export

echo "=========================================================="
echo "Done"
echo "=========================================================="